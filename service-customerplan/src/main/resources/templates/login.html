<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>登录</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />
	<link rel="stylesheet" th:href="@{/css/bootstrap.css}" />
	<!-- Font Awesome -->
	<link rel="stylesheet" th:href="@{/css/adminlte/font-awesome/css/font-awesome.css}" />
	<!-- Ionicons -->
	<link rel="stylesheet" th:href="@{/css/adminlte/ionicons.css}" />
	<!-- Theme style -->
	<link rel="stylesheet" th:href="@{/css/adminlte/AdminLTE.css}" />
	<!-- iCheck -->
	<link rel="stylesheet" th:href="@{/css/adminlte/iCheck/square/blue.css}" />

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

	<!-- Google Font -->
	<!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic" /> -->

	<!-- User Settings -->
	<script th:src="@{/js/jquery-1.12.4.js}" type="text/javascript"></script>
	<script th:src="@{/js/bootstrap.js}" type="text/javascript"></script>
	<script th:src="@{/js/icheck.min.js}" type="text/javascript"></script>
</head>

<body class="hold-transition login-page">
	<div class="login-box">
		<div class="login-logo">
			<a><b>Sign</b> in</a>
		</div>
		<!-- /.login-logo -->
		<div class="login-box-body">
			<p class="login-box-msg">登陆以开始..</p>

			<div class="form-group has-feedback">
				<input type="username" class="form-control" placeholder="用户名" />
				<span class="glyphicon glyphicon-user form-control-feedback"></span>
			</div>
			<div class="form-group has-feedback">
				<input type="password" class="form-control" placeholder="密码" />
				<span class="glyphicon glyphicon-lock form-control-feedback"></span>
			</div>
			<div class="row">
				<div class="col-xs-8">
					<div class="checkbox icheck">
						<label>
							<input type="checkbox" /> 记住我
						</label>
					</div>
				</div>
				<!-- /.col -->
				<div class="col-xs-4">
					<button type="submit" class="btn btn-primary btn-block btn-flat" onclick="submit()">登陆</button>
				</div>
				<!-- /.col -->
			</div>

		</div>
		<!-- /.login-box-body -->
	</div>
	<!-- /.login-box -->

	<script>
		$(function ()
		{
			$('input').iCheck({
				checkboxClass: 'icheckbox_square-blue',
				radioClass: 'iradio_square-blue',
				increaseArea: '20%' /* optional */
			});
		});

		function submit ()
		{
			var username = $("input[type='username']").val();
			var password = $("input[type='password']").val();
			$.ajax
			(
				{
					type: "POST",
					dataType: "json",
					url: "http://localhost:9090/login",
					data: {"username": username, "password": password},
					success: function (data)
					{
						console.log(data);
						if (data != null)
						{
							// delete data["id"];
							delete data["password"];
							// data = delete(data["password"]);
							// console.log(data);
							var str = JSON.stringify(data);
							// var str = "username=" + data["username"] + "; login=true; URL=" + JSON.stringify(data["authoritiesURL"]);
							// console.log(str);
							document.cookie = "logininfo=" + str;
							window.location.href = "/dashboard";
						}
					}
				}
			)
		}
	</script>
</body>

</html>